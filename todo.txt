erDiagram
    lucky_spin_prizes {
        INTEGER id PK
        TEXT name "Tên phần thưởng"
        TEXT type "Enum: COIN, CARD, TEXT, GIFT"
        TEXT value "Giá trị (Mã code, số tiền...)"
        INTEGER probability "Tỷ lệ trúng (0-100%)"
        INTEGER quantity "Số lượng quà còn lại"
        BOOLEAN is_active "Bật/Tắt phần thưởng"
        TEXT image "Ảnh phần thưởng"
    }

    lucky_spin_players {
        INTEGER id PK
        TEXT identifier "Unique (Email hoặc SĐT)"
        INTEGER total_turns "Tổng lượt được quay"
        INTEGER used_turns "Số lượt đã quay"
        DATETIME last_spin_time
        DATETIME created_at
    }

    lucky_spin_history {
        INTEGER id PK
        INTEGER player_id FK
        INTEGER prize_id FK
        TEXT prize_snapshot "Lưu tên quà lúc trúng"
        DATETIME created_at
    }

    lucky_spin_players ||--o{ lucky_spin_history : "Lịch sử quay"
    lucky_spin_prizes ||--o{ lucky_spin_history : "Phần thưởng đã trúng"